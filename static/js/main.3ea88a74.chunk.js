(this.webpackJsonpkreuzwortraetsel=this.webpackJsonpkreuzwortraetsel||[]).push([[0],{47:function(t,e,n){},56:function(t,e,n){"use strict";n.r(e);var r=n(4),a=n.n(r),o=n(37),c=n.n(o),i=(n(47),n(10)),s=n(5),d=n(41),l=n(20),u=n(21),h=n(35),b=n.n(h),x=n(36),j=n(38),v=n(57),y={grid:v.a((function(){return v.a((function(){return""}),25)}),15),words:[]},f=Object(s.a)(Object(s.a)({},y),{},{history:{initialState:y,actions:[],undoStack:[]}}),g=a.a.createContext({state:f,dispatch:function(){}}),O=n(0);function m(){var t=a.a.useContext(g).state;return a.a.useEffect((function(){window.localStorage.kreuzwort=JSON.stringify(t)}),[t]),Object(O.jsx)(O.Fragment,{})}var p=n(27),w=n.n(p),A=n(42),S=n(40),k=n(60),N=n(61),z=n(62),C=n(70),D=n(68),E=n(63),R=n(64),W=n(65),B=n(39),I=n(71),M=n(16),H=n(67),F=n(66),V=n(69),U=n(58),P=n(59);function J(t){return void 0===t.history}function Z(t,e,n,r){return{start:{x:Math.min(t,n),y:Math.min(e,r)},end:{x:Math.max(t,n),y:Math.max(e,r)}}}function L(t){return Object(s.a)(Object(s.a)({},t),{},{history:{initialState:t,actions:[],undoStack:[]}})}function T(t,e){if(B.a(t.start,t.end))return!1;if(t.start.x!==t.end.x&&t.start.y!==t.end.y)return!1;var n=S.a((function(e){return t.start.x===t.end.x?e.start.x===e.end.x&&e.start.x===t.start.x:e.start.y===e.end.y&&e.start.y===t.start.y}),e);return H.a((function(e){return t.start.x===t.end.x?t.start.y>=e.start.y&&t.start.y<=e.end.y||e.start.y>=t.start.y&&e.start.y<=t.end.y:t.start.x>=e.start.x&&t.start.x<=e.end.x||e.start.x>=t.start.x&&e.start.x<=t.end.x}),n)}function G(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"InitializeAction"},n=J(t)?L(t):t;switch(e.type){case"ChangeAction":return Object(s.a)(Object(s.a)({},n),{},{grid:F.a(e.payload.y,F.a(e.payload.x,e.payload.letter,n.grid[e.payload.y]),n.grid),history:Object(s.a)(Object(s.a)({},n.history),{},{actions:[].concat(Object(M.a)(n.history.actions),[e]),undoStack:[]})});case"AddWordAction":return T(e.payload.word,n.words)?Object(s.a)(Object(s.a)({},n),{},{words:[].concat(Object(M.a)(n.words),[e.payload.word]),history:Object(s.a)(Object(s.a)({},n.history),{},{actions:[].concat(Object(M.a)(n.history.actions),[e]),undoStack:[]})}):n;case"ChangeWordAction":return Object(s.a)(Object(s.a)({},n),{},{words:D.a((function(t){return B.a(t,e.payload.old)?e.payload.new:t}),n.words),history:Object(s.a)(Object(s.a)({},n.history),{},{actions:[].concat(Object(M.a)(n.history.actions),[e]),undoStack:[]})});case"RemoveWordAction":return Object(s.a)(Object(s.a)({},n),{},{words:V.a([e.payload.word],n.words),history:Object(s.a)(Object(s.a)({},n.history),{},{actions:[].concat(Object(M.a)(n.history.actions),[e]),undoStack:[]})});case"UndoAction":var r=U.a(G,G(n.history.initialState),P.a(0,-1,n.history.actions));return Object(s.a)(Object(s.a)({},r),{},{history:Object(s.a)(Object(s.a)({},r.history),{},{undoStack:[].concat(Object(M.a)(n.history.undoStack),[n.history.actions[n.history.actions.length-1]])})});case"RedoAction":var a=G(n,n.history.undoStack[n.history.undoStack.length-1]);return Object(s.a)(Object(s.a)({},a),{},{history:Object(s.a)(Object(s.a)({},a.history),{},{undoStack:P.a(0,-1,n.history.undoStack)})});case"ResetAction":return Object(s.a)({},G(e.payload.baseState||n.history.initialState));case"InitializeAction":return n}}function K(t,e,n){return{type:"ChangeAction",payload:{letter:t,x:e,y:n}}}function q(t){var e=a.a.useState((function(){var t=new Image(0,0);return t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",t})),n=Object(i.a)(e,1)[0],r=t.x,o=t.y,c=t.dragStart,s=t.setDragStart,d=t.dragEnd,l=t.setDragEnd,u=a.a.useContext(g),h=u.state,b=u.dispatch;return Object(O.jsx)("div",{draggable:!0,className:"relative flex w-10 h-10 items-center justify-center",onDragStart:function(t){t.dataTransfer.setDragImage(n,0,0),s({x:r,y:o})},onDragEnter:function(){l({x:r,y:o})},onDrop:function(){if(c&&d){var t=Z(c.x,c.y,d.x,d.y);if(T(t,h.words))b({type:"AddWordAction",payload:{word:t}});else if(!B.a(c,d)){var e=I.a((function(t){return B.a(t.start,c)&&(c.x===d.x?t.end.x===d.x:t.end.y===d.y)}),h.words);e&&(B.a(e.end,d)?b(function(t){return{type:"RemoveWordAction",payload:{word:t}}}(e)):b(function(t,e){return{type:"ChangeWordAction",payload:{old:t,new:e}}}(e,t)))}s(void 0),l(void 0)}},children:t.children})}var Q=n(72);function Y(t){return Object(O.jsx)("div",{className:w()("absolute",t.color,"pointer-events-none",{"w-8":t.vertical,"h-10":t.vertical,"w-10":!t.vertical,"h-8":!t.vertical,"border-l-4":t.start||t.vertical&&t.middle,"border-t-4":t.start||!t.vertical&&t.middle,"border-r-4":t.end||t.vertical&&t.middle,"border-b-4":t.end||!t.vertical&&t.middle})})}function _(t){var e=t.x,n=t.y,r=t.dragStart,a=t.dragEnd,o=t.dragColor,c=t.horizontalWords,i=t.verticalWords;return Object(O.jsxs)(O.Fragment,{children:[t.highlightVertical&&Object(O.jsx)(Y,{vertical:!0,start:Q.a((function(t){return e===t.start.x&&n===t.start.y}),i),middle:Q.a((function(t){return e===t.start.x&&e===t.end.x&&n>=t.start.y&&n<=t.end.y}),i),end:Q.a((function(t){return e===t.end.x&&n===t.end.y}),i),color:"border-blue-400"}),t.highlightHorizontal&&Object(O.jsx)(Y,{color:"border-blue-400",start:Q.a((function(t){return e===t.start.x&&n===t.start.y}),c),middle:Q.a((function(t){return n===t.start.y&&n===t.end.y&&e>=t.start.x&&e<=t.end.x}),c),end:Q.a((function(t){return e===t.end.x&&n===t.end.y}),c)}),r&&Object(O.jsx)(Y,{vertical:(null===r||void 0===r?void 0:r.x)===(null===a||void 0===a?void 0:a.x),color:o,start:e===(null===r||void 0===r?void 0:r.x)&&n===(null===r||void 0===r?void 0:r.y),middle:(null===r||void 0===r?void 0:r.y)===(null===a||void 0===a?void 0:a.y)&&n===(null===r||void 0===r?void 0:r.y)&&e>=(null===r||void 0===r?void 0:r.x)&&e<=(null===a||void 0===a?void 0:a.x)||(null===r||void 0===r?void 0:r.x)===(null===a||void 0===a?void 0:a.x)&&e===(null===r||void 0===r?void 0:r.x)&&e===(null===a||void 0===a?void 0:a.x)&&n>=(null===r||void 0===r?void 0:r.y)&&n<=(null===a||void 0===a?void 0:a.y),end:e===(null===a||void 0===a?void 0:a.x)&&n===(null===a||void 0===a?void 0:a.y)})]})}var X=n(12),$=n.n(X);function tt(t,e){var n;null===(n=document.getElementById("letter-".concat(t,"-").concat(e)))||void 0===n||n.focus()}function et(t){var e=t.x,n=t.y,r=t.letter,o=a.a.useContext(g).dispatch;return Object(O.jsx)("input",{id:"letter-".concat(e,"-").concat(n),className:"text-center w-10 h-10 bg-transparent border-none outline-none",type:"text",size:1,value:r,pattern:"[A-Z]",onChange:function(t){if(t.target.value){var r=t.target.value.substr(-1).toUpperCase();(function(t){return/[A-Z]/.test(t)})(r)&&o(K(r,e,n))}else o(K("",e,n))},onClick:function(t){return t.target.select()},onKeyDown:function(t){$()("left")(t.nativeEvent)?(tt(e-1,n),t.preventDefault()):$()("right")(t.nativeEvent)?(tt(e+1,n),t.preventDefault()):$()("up")(t.nativeEvent)||$()("shift+enter")(t.nativeEvent)?(tt(e,n-1),t.preventDefault()):$()("down")(t.nativeEvent)||$()("enter")(t.nativeEvent)?(tt(e,n+1),t.preventDefault()):$()("mod+z")(t.nativeEvent)?o({type:"UndoAction"}):($()("mod+shift+z")(t.nativeEvent)||$()("mod+y")(t.nativeEvent))&&o({type:"RedoAction"})},tabIndex:0})}function nt(t,e,n,r){var a=r?"x":"y",o=r?"y":"x",c=v.a((function(){return v.a(A.a,t-1)}),e),i=S.a((function(t){return r?t.start.y===t.end.y:t.start.x===t.end.x}),n);return k.a((function(t){var n=t.start[a],r=t.start[o];if(!(r>e)){var i=n<0?0:N.a(n,c[r]),s=n<0?t.end[a]:t.end[a]-n;c[r]=z.a(i,s,c[r])}}),i),c}function rt(t){var e=t.words,n=C.a(D.a((function(t){return t.start}),e));return E.a([R.a(W.a("y")),R.a(W.a("x"))],n)}function at(t){var e=a.a.useContext(g).state,n=function(t){var e=t.grid,n=t.words;return{horizontal:nt(e[0].length,e.length,n,!0),vertical:nt(e.length,e[0].length,n,!1)}}(e),r=rt(e),o=a.a.useState(),c=Object(i.a)(o,2),s=c[0],d=c[1],l=a.a.useState(),u=Object(i.a)(l,2),h=u[0],b=u[1],x=s&&h?T(Z(Math.min(s.x,h.x),Math.min(s.y,h.y),Math.max(s.x,h.x),Math.max(s.y,h.y)),e.words)?"border-green-400":"border-red-800":"",j=S.a((function(t){return t.start.x===t.end.x}),e.words),v=S.a((function(t){return t.start.y===t.end.y}),e.words);return Object(O.jsx)("div",{className:"flex flex-col items-center justify-center",children:e.grid.map((function(a,o){return Object(O.jsx)("div",{className:"flex flex-row text-lg",onDragOver:function(t){t.stopPropagation(),t.preventDefault()},children:a.map((function(a,c){var i=N.a({x:c,y:o},r);return Object(O.jsx)(q,{x:c,y:o,dragStart:s,setDragStart:d,dragEnd:h,setDragEnd:b,children:Object(O.jsxs)("div",{className:w()("w-10 h-10 flex items-center justify-center border-black",{border:a||t.showSolution,"border-dashed":!a&&t.showSolution,"border-none":!a&&!t.showSolution},a&&n.horizontal[o].includes(c)&&e.grid[o][c+1]?"border-r-4":"pr-1",a&&n.vertical[c].includes(o)&&e.grid[o+1][c]?"border-b-4":"pb-1"),children:[Object(O.jsx)(_,{highlightHorizontal:t.highlightHorizontal,highlightVertical:t.highlightVertical,x:c,y:o,dragColor:x,dragStart:s,dragEnd:h,horizontalWords:v,verticalWords:j}),i>=0?Object(O.jsx)("span",{className:"absolute top-0 left-1 text-xs",children:i+1}):null,t.showSolution&&Object(O.jsx)(et,{x:c,y:o,letter:a})]})},c)}))},o)}))})}function ot(){var t=a.a.useContext(g).state,e=rt(t),n=S.a((function(t){return t.start.y===t.end.y}),t.words),r=D.a((function(t){return{wordBounds:t,number:1+N.a(t.start,e)}}),n),o=E.a([R.a(W.a("number"))],r),c=S.a((function(t){return t.start.x===t.end.x}),t.words),i=D.a((function(t){return{wordBounds:t,number:1+N.a(t.start,e)}}),c),s=E.a([R.a(W.a("number"))],i);return Object(O.jsxs)("div",{className:"flex flex-col shadow-md p-4 border rounded",children:[Object(O.jsx)("h3",{className:"text-xl font-bold",children:"Waagerecht:"}),o.map((function(e){for(var n=e.wordBounds,r=e.number,a="",o=0;o<=n.end.x-n.start.x;o++)a+=t.grid[n.start.y][n.start.x+o]||" _";return Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{className:"ml-3 mr-2",children:r}),Object(O.jsx)("span",{children:a})]},r)})),Object(O.jsx)("h3",{className:"mt-2 text-xl font-bold",children:"Senkrecht:"}),s.map((function(e){for(var n=e.wordBounds,r=e.number,a="",o=0;o<=n.end.y-n.start.y;o++)a+=t.grid[n.start.y+o][n.start.x];return Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{className:"ml-3 mr-2",children:r}),Object(O.jsx)("span",{children:a})]},r)}))]})}var ct=["bg","hover-bg","children"];function it(t){var e=t.bg,n=t["hover-bg"],r=t.children,a=Object(d.a)(t,ct);return Object(O.jsx)("button",Object(s.a)(Object(s.a)({className:"".concat(e," ").concat(n," text-white font-bold py-2 px-4 rounded")},a),{},{children:r}))}var st=function(){var t=a.a.useReducer(G,function(){if(window.localStorage.kreuzwort)return JSON.parse(window.localStorage.kreuzwort)}()||f),e=Object(i.a)(t,2),n=e[0],r=e[1],o=a.a.createRef(),c=a.a.createRef(),s=a.a.useState(!0),d=Object(i.a)(s,2),h=d[0],v=d[1],y=a.a.useState(!0),p=Object(i.a)(y,2),w=p[0],A=p[1];return Object(O.jsx)("div",{className:"mx-auto sm:w-3/4 md:w-2/4 my-10 inset-0 flex items-center justify-center",children:Object(O.jsx)("div",{className:"flex flex-col items-center justify-center",children:Object(O.jsx)(g.Provider,{value:{state:n,dispatch:r},children:Object(O.jsxs)(j.GlobalHotKeys,{keyMap:{UNDO:["ctrl+z","command+z"],REDO:["ctrl+y","command+y","ctrl+shift+z","command+shift+z"]},handlers:{UNDO:function(){return r({type:"UndoAction"})},REDO:function(){return r({type:"RedoAction"})}},children:[Object(O.jsx)(m,{}),Object(O.jsxs)("div",{className:"right flex flex-row space-x-4 mb-4",children:[Object(O.jsx)(it,{bg:"bg-blue-500","hover-bg":"hover:bg-blue-700",onClick:function(){return r({type:"UndoAction"})},title:"R\xfcckg\xe4ngig (Strg+Z)",children:Object(O.jsx)(l.a,{icon:u.d})}),Object(O.jsx)(it,{bg:"bg-blue-500","hover-bg":"hover:bg-blue-700",onClick:function(){return r({type:"RedoAction"})},title:"Wiederholen (Strg+Y)",children:Object(O.jsx)(l.a,{icon:u.b})}),Object(O.jsxs)(it,{bg:"bg-red-500","hover-bg":"hover:bg-red-700",onClick:function(){window.confirm("Alles l\xf6schen?")&&r({type:"ResetAction",payload:{baseState:f}})},children:[Object(O.jsx)(l.a,{icon:u.c,className:"mr-2"}),"Zur\xfccksetzen"]}),Object(O.jsx)(it,{bg:"bg-blue-500","hover-bg":"hover:bg-blue-700",onClick:function(){o.current&&Object(x.a)(o.current,{quality:1,pixelRatio:1,cacheBust:!0}).then((function(t){b()(t,"solution.png")})).catch((function(t){console.error("oops, something went wrong!",t)}))},title:"Download",children:Object(O.jsx)(l.a,{icon:u.a})})]}),Object(O.jsxs)("div",{className:"flex flex-row flex-align-left mb-4",children:[Object(O.jsxs)("div",{className:"flex space-x-2 mr-6",children:[Object(O.jsx)("input",{id:"highlightHorizontal",className:"form-checkbox",type:"checkbox",checked:h,onChange:function(){return v(!h)}}),Object(O.jsx)("label",{htmlFor:"highlightHorizontal",children:"Horizontale W\xf6rter hervorheben"})]}),Object(O.jsxs)("div",{className:"flex space-x-2",children:[Object(O.jsx)("input",{id:"highlightVertical",className:"form-checkbox",type:"checkbox",checked:w,onChange:function(){return A(!w)}}),Object(O.jsx)("label",{htmlFor:"highlightVertical",children:"Vertikale W\xf6rter hervorheben"})]})]}),Object(O.jsx)("div",{ref:o,children:Object(O.jsx)(at,{showSolution:!0,highlightHorizontal:h,highlightVertical:w})}),Object(O.jsx)("hr",{className:"border border-gray-400 my-4 w-full"}),Object(O.jsxs)("div",{className:"my-8",children:[Object(O.jsx)("span",{className:"text-2xl mr-3",children:"Vorschau: "}),Object(O.jsxs)(it,{bg:"bg-blue-500","hover-bg":"hover:bg-blue-700",onClick:function(){c.current&&Object(x.a)(c.current).then((function(t){b()(t,"grid.png")})).catch((function(t){console.error("oops, something went wrong!",t)}))},title:"Download",children:[Object(O.jsx)(l.a,{icon:u.a,className:"mr-2"}),"R\xe4tsel herunterladen"]})]}),Object(O.jsxs)("div",{className:"flex flex-row space-x-12",children:[Object(O.jsx)("div",{ref:c,children:Object(O.jsx)(at,{})}),Object(O.jsx)(ot,{})]})]})})})})},dt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,73)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),o(t),c(t)}))};c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(st,{})}),document.getElementById("root")),dt()}},[[56,1,2]]]);
//# sourceMappingURL=main.3ea88a74.chunk.js.map