{"version":3,"sources":["StateContext.tsx","AutoSave.tsx","reducer.ts","AddWordDragZone.tsx","Highlight.tsx","LetterInput.tsx","Grid.tsx","Definitions.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["baseState","grid","R","words","initialState","history","actions","undoStack","StateContext","React","createContext","state","dispatch","AutoSave","useContext","useEffect","window","localStorage","JSON","stringify","isBaseState","undefined","word","x1","y1","x2","y2","start","x","Math","min","y","end","max","withHistory","isValidWord","filterSameLine","other","w","reducer","prev","action","type","previous","payload","letter","old","new","nextState","length","change","MarkWordDragZone","props","useState","dragImg","Image","src","dragStart","setDragStart","dragEnd","setDragEnd","draggable","className","onDragStart","e","dataTransfer","setDragImage","onDragEnter","onDrop","newWord","oldWord","removeWord","changeWord","children","Highlight","classNames","color","vertical","middle","Highlights","dragColor","horizontalWords","verticalWords","highlightVertical","highlightHorizontal","focusInput","document","getElementById","focus","LetterInput","id","size","value","pattern","onChange","target","substr","toUpperCase","test","isLetter","onClick","select","onKeyDown","isHotkey","nativeEvent","preventDefault","tabIndex","getLines2","width","height","horizontal","colProp","rowProp","lines","filtered","col","row","getNumbers","uniqStarts","Grid","getLines","numbers","dragBorderColor","map","onDragOver","stopPropagation","wordStartNumber","border","showSolution","includes","Definitions","filteredHorizontal","horizontalWithNumbers","wordBounds","number","horizontalWithNumbersSorted","filteredVertical","verticalWithNumbers","verticalWithNumbersSorted","i","Button","bg","hoverBg","params","App","useReducer","parse","loadSavedState","solutionRef","createRef","gridRef","setHighlightHorizontal","setHighlightVertical","Provider","keyMap","UNDO","REDO","handlers","title","icon","faUndo","faRedo","confirm","faTrash","current","toPng","quality","pixelRatio","cacheBust","then","dataUrl","download","catch","error","console","faDownload","checked","htmlFor","ref","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3ea88a74.chunk.js","sourcesContent":["import React from 'react'\r\nimport * as R from 'ramda'\r\nimport { State, Action, BaseState } from './reducer'\r\n\r\nconst baseState: BaseState = {\r\n  grid: R.times(() => R.times<''>(() => '', 25), 15),\r\n  words: [],\r\n}\r\n\r\nexport const initialState = {\r\n  ...baseState,\r\n  history: {\r\n    initialState: baseState,\r\n    actions: [],\r\n    undoStack: [],\r\n  },\r\n}\r\n\r\nexport const StateContext = React.createContext<{\r\n  state: State\r\n  dispatch: (action: Action) => void\r\n}>({\r\n  state: initialState,\r\n  dispatch: () => {},\r\n})\r\n","import React from 'react'\r\nimport { State } from './reducer';\r\nimport { StateContext } from \"./StateContext\";\r\n\r\nexport function AutoSave() {\r\n  const { state } = React.useContext(StateContext)\r\n  React.useEffect(() => {\r\n    window.localStorage['kreuzwort'] = JSON.stringify(state)\r\n  }, [state])\r\n  return <></>\r\n}\r\n\r\nexport function loadSavedState() {\r\n  if (window.localStorage['kreuzwort']) return JSON.parse(window.localStorage['kreuzwort']) as State\r\n}","import * as R from 'ramda'\r\n\r\n// prettier-ignore\r\nexport type Letter = 'A'|'B'|'C'|'D'|'E'|'F'|'G'|'H'|'I'|'J'|'K'|'L'|'M'|'N'|'O'|'P'|'Q'|'R'|'S'|'T'|'U'|'V'|'W'|'X'|'Y'|'Z'\r\nexport function isLetter(letter: Letter | string): letter is Letter {\r\n  return /[A-Z]/.test(letter)\r\n}\r\nexport interface Pos {\r\n  x: number\r\n  y: number\r\n}\r\nexport interface Word {\r\n  start: Pos\r\n  end: Pos\r\n}\r\n\r\nexport interface State extends BaseState {\r\n  history: { initialState: BaseState; actions: Action[]; undoStack: Action[] }\r\n}\r\n\r\nexport interface BaseState {\r\n  grid: (Letter | '')[][]\r\n  words: Word[]\r\n}\r\n\r\nfunction isBaseState(state: State | BaseState): state is BaseState {\r\n  return (state as State).history === undefined\r\n}\r\n\r\nexport function word(x1: number, y1: number, x2: number, y2: number): Word {\r\n  return {\r\n    start: { x: Math.min(x1, x2), y: Math.min(y1, y2) },\r\n    end: { x: Math.max(x1, x2), y: Math.max(y1, y2) },\r\n  }\r\n}\r\n\r\nexport function withHistory(baseState: BaseState): State {\r\n  return {\r\n    ...baseState,\r\n    history: {\r\n      initialState: baseState,\r\n      actions: [],\r\n      undoStack: [],\r\n    },\r\n  }\r\n}\r\nexport function isValidWord(word: Word, words: Word[]) {\r\n  // check that it is longer than one character\r\n  if (R.equals(word.start, word.end)) return false\r\n  // check that it is in one line\r\n  if (word.start.x !== word.end.x && word.start.y !== word.end.y) return false\r\n\r\n  const filterSameLine = R.filter((other) => {\r\n    return word.start.x === word.end.x // word is vertical\r\n      ? other.start.x === other.end.x && other.start.x === word.start.x // filter only vertical in same col\r\n      : other.start.y === other.end.y && other.start.y === word.start.y // filter only horizontal in same row\r\n  }, words)\r\n  return (\r\n    // check if word start is intersecting existing word\r\n    R.none((w) => {\r\n      if (word.start.x === word.end.x) {\r\n        return (\r\n          (word.start.y >= w.start.y && word.start.y <= w.end.y) ||\r\n          (w.start.y >= word.start.y && w.start.y <= word.end.y)\r\n        )\r\n      } else {\r\n        return (\r\n          (word.start.x >= w.start.x && word.start.x <= w.end.x) ||\r\n          (w.start.x >= word.start.x && w.start.x <= word.end.x)\r\n        )\r\n      }\r\n    }, filterSameLine)\r\n  )\r\n}\r\n\r\ninterface ChangeAction {\r\n  type: 'ChangeAction'\r\n  payload: {\r\n    letter: Letter | ''\r\n    x: number\r\n    y: number\r\n  }\r\n}\r\n\r\ninterface AddWordAction {\r\n  type: 'AddWordAction'\r\n  payload: {\r\n    word: Word\r\n  }\r\n}\r\ninterface ChangeWordAction {\r\n  type: 'ChangeWordAction'\r\n  payload: {\r\n    old: Word\r\n    new: Word\r\n  }\r\n}\r\ninterface RemoveWordAction {\r\n  type: 'RemoveWordAction'\r\n  payload: {\r\n    word: Word\r\n  }\r\n}\r\n\r\ninterface UndoAction {\r\n  type: 'UndoAction'\r\n}\r\n\r\ninterface RedoAction {\r\n  type: 'RedoAction'\r\n}\r\n\r\ninterface ResetAction {\r\n  type: 'ResetAction'\r\n  payload: {\r\n    baseState?: BaseState\r\n  }\r\n}\r\n\r\ninterface InitializeAction {\r\n  type: 'InitializeAction'\r\n}\r\n\r\nexport type Action =\r\n  | ChangeAction\r\n  | AddWordAction\r\n  | ChangeWordAction\r\n  | RemoveWordAction\r\n  | UndoAction\r\n  | RedoAction\r\n  | ResetAction\r\n  | InitializeAction\r\n\r\nexport function reducer(\r\n  prev: State | BaseState,\r\n  action: Action = {\r\n    type: 'InitializeAction',\r\n  }\r\n): State {\r\n  const previous = isBaseState(prev) ? withHistory(prev) : prev\r\n  switch (action.type) {\r\n    case 'ChangeAction':\r\n      return {\r\n        ...previous,\r\n        grid: R.update(\r\n          action.payload.y,\r\n          R.update(\r\n            action.payload.x,\r\n            action.payload.letter,\r\n            previous.grid[action.payload.y]\r\n          ),\r\n          previous.grid\r\n        ),\r\n        history: {\r\n          ...previous.history,\r\n          actions: [...previous.history.actions, action],\r\n          undoStack: [],\r\n        },\r\n      }\r\n    case 'AddWordAction':\r\n      return isValidWord(action.payload.word, previous.words)\r\n        ? {\r\n            ...previous,\r\n            words: [...previous.words, action.payload.word],\r\n            history: {\r\n              ...previous.history,\r\n              actions: [...previous.history.actions, action],\r\n              undoStack: [],\r\n            },\r\n          }\r\n        : previous\r\n    case 'ChangeWordAction':\r\n      return {\r\n        ...previous,\r\n        words: R.map(\r\n          (w) => (R.equals(w, action.payload.old) ? action.payload.new : w),\r\n          previous.words\r\n        ),\r\n        history: {\r\n          ...previous.history,\r\n          actions: [...previous.history.actions, action],\r\n          undoStack: [],\r\n        },\r\n      }\r\n    case 'RemoveWordAction':\r\n      return {\r\n        ...previous,\r\n        words: R.without([action.payload.word], previous.words),\r\n        history: {\r\n          ...previous.history,\r\n          actions: [...previous.history.actions, action],\r\n          undoStack: [],\r\n        },\r\n      }\r\n    case 'UndoAction': {\r\n      const nextState = R.reduce(\r\n        reducer,\r\n        reducer(previous.history.initialState),\r\n        R.slice(0, -1, previous.history.actions)\r\n      )\r\n      return {\r\n        ...nextState,\r\n        history: {\r\n          ...nextState.history,\r\n          undoStack: [\r\n            ...previous.history.undoStack,\r\n            previous.history.actions[previous.history.actions.length - 1],\r\n          ],\r\n        },\r\n      }\r\n    }\r\n    case 'RedoAction': {\r\n      const nextState = reducer(\r\n        previous,\r\n        previous.history.undoStack[previous.history.undoStack.length - 1]\r\n      )\r\n      return {\r\n        ...nextState,\r\n        history: {\r\n          ...nextState.history,\r\n          undoStack: R.slice(0, -1, previous.history.undoStack),\r\n        },\r\n      }\r\n    }\r\n    case 'ResetAction':\r\n      return {\r\n        ...reducer(action.payload.baseState || previous.history.initialState),\r\n      }\r\n    case 'InitializeAction':\r\n      return previous\r\n  }\r\n}\r\n\r\nexport function change(\r\n  letter: Letter | '',\r\n  x: number,\r\n  y: number\r\n): ChangeAction {\r\n  return {\r\n    type: 'ChangeAction',\r\n    payload: {\r\n      letter: letter,\r\n      x: x,\r\n      y: y,\r\n    },\r\n  }\r\n}\r\n\r\nexport function addWord(word: Word): AddWordAction {\r\n  return {\r\n    type: 'AddWordAction',\r\n    payload: {\r\n      word: word,\r\n    },\r\n  }\r\n}\r\n\r\nexport function changeWord(oldWord: Word, newWord: Word): ChangeWordAction {\r\n  return {\r\n    type: 'ChangeWordAction',\r\n    payload: {\r\n      old: oldWord,\r\n      new: newWord,\r\n    },\r\n  }\r\n}\r\n\r\nexport function removeWord(word: Word): RemoveWordAction {\r\n  return {\r\n    type: 'RemoveWordAction',\r\n    payload: {\r\n      word: word,\r\n    },\r\n  }\r\n}\r\n\r\nexport function undo(): UndoAction {\r\n  return {\r\n    type: 'UndoAction',\r\n  }\r\n}\r\n\r\nexport function redo(): RedoAction {\r\n  return {\r\n    type: 'RedoAction',\r\n  }\r\n}\r\n\r\nexport function reset(initial?: BaseState): ResetAction {\r\n  return {\r\n    type: 'ResetAction',\r\n    payload: {\r\n      baseState: initial,\r\n    },\r\n  }\r\n}\r\n","import * as R from 'ramda'\r\nimport React from 'react'\r\nimport {\r\n  addWord,\r\n  changeWord,\r\n  isValidWord,\r\n  Pos,\r\n  removeWord,\r\n  word,\r\n} from './reducer'\r\nimport { StateContext } from './StateContext'\r\n\r\ninterface MarkWordDropZone {\r\n  x: number\r\n  y: number\r\n  dragStart?: Pos\r\n  setDragStart: (newpos: Pos | undefined) => void\r\n  dragEnd?: Pos\r\n  setDragEnd: (newpos: Pos | undefined) => void\r\n}\r\nexport function MarkWordDragZone(\r\n  props: React.PropsWithChildren<MarkWordDropZone>\r\n) {\r\n  const [dragImg] = React.useState(() => {\r\n    const dragImg = new Image(0, 0)\r\n    dragImg.src =\r\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\r\n    return dragImg\r\n  })\r\n  const { x, y, dragStart, setDragStart, dragEnd, setDragEnd } = props\r\n  const { state, dispatch } = React.useContext(StateContext)\r\n  return (\r\n    <div\r\n      draggable\r\n      className=\"relative flex w-10 h-10 items-center justify-center\"\r\n      onDragStart={(e) => {\r\n        e.dataTransfer.setDragImage(dragImg, 0, 0)\r\n        setDragStart({ x, y })\r\n      }}\r\n      onDragEnter={() => {\r\n        setDragEnd({ x, y })\r\n      }}\r\n      onDrop={() => {\r\n        if (dragStart && dragEnd) {\r\n          const newWord = word(dragStart.x, dragStart.y, dragEnd.x, dragEnd.y)\r\n          if (isValidWord(newWord, state.words)) {\r\n            dispatch(addWord(newWord))\r\n          } else if (!R.equals(dragStart, dragEnd)) {\r\n            const oldWord = R.find(\r\n              (w) =>\r\n                R.equals(w.start, dragStart) &&\r\n                (dragStart.x === dragEnd.x\r\n                  ? w.end.x === dragEnd.x\r\n                  : w.end.y === dragEnd.y),\r\n              state.words\r\n            )\r\n            if (oldWord) {\r\n              if (R.equals(oldWord.end, dragEnd)) {\r\n                dispatch(removeWord(oldWord))\r\n              } else {\r\n                dispatch(changeWord(oldWord, newWord))\r\n              }\r\n            }\r\n          }\r\n          setDragStart(undefined)\r\n          setDragEnd(undefined)\r\n        }\r\n      }}\r\n    >\r\n      {props.children}\r\n    </div>\r\n  )\r\n}\r\n","import classNames from 'classnames'\r\nimport * as R from 'ramda'\r\nimport { Pos, Word } from './reducer'\r\n\r\ninterface HighlightsProps {\r\n  highlightHorizontal?: boolean\r\n  highlightVertical?: boolean\r\n  x: number\r\n  y: number\r\n  dragStart?: Pos\r\n  dragEnd?: Pos\r\n  dragColor: string\r\n  horizontalWords: Word[]\r\n  verticalWords: Word[]\r\n}\r\ninterface HighlightProps {\r\n  color: string\r\n  vertical?: boolean\r\n  start?: boolean\r\n  middle?: boolean\r\n  end?: boolean\r\n}\r\n\r\nexport function Highlight(props: HighlightProps) {\r\n  return (\r\n    <div\r\n      className={classNames('absolute', props.color, 'pointer-events-none', {\r\n        'w-8': props.vertical,\r\n        'h-10': props.vertical,\r\n        'w-10': !props.vertical,\r\n        'h-8': !props.vertical,\r\n        'border-l-4': props.start || (props.vertical && props.middle),\r\n        'border-t-4': props.start || (!props.vertical && props.middle),\r\n        'border-r-4': props.end || (props.vertical && props.middle),\r\n        'border-b-4': props.end || (!props.vertical && props.middle),\r\n      })}\r\n    />\r\n  )\r\n}\r\n\r\nexport function Highlights(props: HighlightsProps) {\r\n  const { x, y, dragStart, dragEnd, dragColor, horizontalWords, verticalWords } = props\r\n  return (\r\n    <>\r\n      {props.highlightVertical && (\r\n        <Highlight\r\n          vertical\r\n          start={R.any((w) => x === w.start.x && y === w.start.y, verticalWords)}\r\n          middle={R.any(\r\n            (w) =>\r\n              x === w.start.x &&\r\n              x === w.end.x &&\r\n              y >= w.start.y &&\r\n              y <= w.end.y,\r\n            verticalWords\r\n          )}\r\n          end={R.any((w) => x === w.end.x && y === w.end.y, verticalWords)}\r\n          color=\"border-blue-400\"\r\n        />\r\n      )}\r\n      {props.highlightHorizontal && (\r\n        <Highlight\r\n          color=\"border-blue-400\"\r\n          start={R.any((w) => x === w.start.x && y === w.start.y, horizontalWords)}\r\n          middle={R.any(\r\n            (w) =>\r\n              y === w.start.y &&\r\n              y === w.end.y &&\r\n              x >= w.start.x &&\r\n              x <= w.end.x,\r\n            horizontalWords\r\n          )}\r\n          end={R.any((w) => x === w.end.x && y === w.end.y, horizontalWords)}\r\n        />\r\n      )}\r\n      {dragStart && (\r\n        <Highlight\r\n          vertical={dragStart?.x === dragEnd?.x}\r\n          color={dragColor}\r\n          start={x === dragStart?.x && y === dragStart?.y}\r\n          middle={\r\n            (dragStart?.y === dragEnd?.y &&\r\n              y === dragStart?.y &&\r\n              x >= dragStart?.x &&\r\n              x <= dragEnd?.x) || // horizontal\r\n            (dragStart?.x === dragEnd?.x &&\r\n              x === dragStart?.x &&\r\n              x === dragEnd?.x &&\r\n              y >= dragStart?.y &&\r\n              y <= dragEnd?.y) // vertical\r\n          }\r\n          end={x === dragEnd?.x && y === dragEnd?.y}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import isHotkey from 'is-hotkey'\r\nimport React from 'react'\r\nimport { change, isLetter, Letter, redo, undo } from './reducer'\r\nimport { StateContext } from './StateContext'\r\n\r\nfunction focusInput(x: number, y: number) {\r\n  document.getElementById(`letter-${x}-${y}`)?.focus()\r\n}\r\n\r\nexport function LetterInput(props: { x: number; y: number; letter: Letter|'' }) {\r\n  const { x, y, letter } = props\r\n  const { dispatch } = React.useContext(StateContext)\r\n  return (\r\n    <input\r\n      id={`letter-${x}-${y}`}\r\n      className=\"text-center w-10 h-10 bg-transparent border-none outline-none\"\r\n      type=\"text\"\r\n      size={1}\r\n      value={letter}\r\n      pattern=\"[A-Z]\"\r\n      onChange={(e) => {\r\n        if (!e.target.value) {\r\n          dispatch(change('', x, y))\r\n        } else {\r\n          const letter = e.target.value.substr(-1).toUpperCase()\r\n          if (isLetter(letter)) {\r\n            dispatch(change(letter, x, y))\r\n          }\r\n        }\r\n      }}\r\n      onClick={(e) => (e.target as HTMLInputElement).select()}\r\n      // onFocus={(e) => (e.target as HTMLInputElement).select()}\r\n      onKeyDown={(e) => {\r\n        if (isHotkey('left')(e.nativeEvent)) {\r\n          focusInput(x - 1, y)\r\n          e.preventDefault()\r\n        } else if (isHotkey('right')(e.nativeEvent)) {\r\n          focusInput(x + 1, y)\r\n          e.preventDefault()\r\n        } else if (\r\n          isHotkey('up')(e.nativeEvent) ||\r\n          isHotkey('shift+enter')(e.nativeEvent)\r\n        ) {\r\n          focusInput(x, y - 1)\r\n          e.preventDefault()\r\n        } else if (\r\n          isHotkey('down')(e.nativeEvent) ||\r\n          isHotkey('enter')(e.nativeEvent)\r\n        ) {\r\n          focusInput(x, y + 1)\r\n          e.preventDefault()\r\n        } else if (isHotkey('mod+z')(e.nativeEvent)) {\r\n          dispatch(undo())\r\n        } else if (\r\n          isHotkey('mod+shift+z')(e.nativeEvent) ||\r\n          isHotkey('mod+y')(e.nativeEvent)\r\n        ) {\r\n          dispatch(redo())\r\n        }\r\n      }}\r\n      tabIndex={0}\r\n    />\r\n  )\r\n}\r\n","import classNames from 'classnames'\r\nimport * as R from 'ramda'\r\nimport React from 'react'\r\nimport { MarkWordDragZone as AddWordDragZone } from './AddWordDragZone'\r\nimport { Highlights } from './Highlight'\r\nimport { LetterInput } from './LetterInput'\r\nimport { State, Pos, Word, word, isValidWord } from './reducer'\r\nimport { StateContext } from './StateContext'\r\n\r\nexport interface GridProps {\r\n  showSolution?: boolean\r\n  highlightHorizontal?: boolean\r\n  highlightVertical?: boolean\r\n}\r\n/**\r\n * Searches for horizontal (rowProp === 'x') or vertical lines (rowProp === 'y') lines for the cross word puzzle\r\n * @param width number of rows\r\n * @param height number of columns\r\n * @param words horizontal or vertical words\r\n * @param rowProp 'x' for horizontal or 'y' for vertical\r\n * @returns list of indizes for every row\r\n */\r\nfunction getLines2(\r\n  width: number,\r\n  height: number,\r\n  words: Word[],\r\n  horizontal: boolean\r\n) {\r\n  const colProp = horizontal ? 'x' : 'y'\r\n  const rowProp = horizontal ? 'y' : 'x'\r\n  const lines: number[][] = R.times(\r\n    () => R.times(R.identity, width - 1),\r\n    height\r\n  )\r\n  const filtered: Word[] = R.filter(\r\n    (word) =>\r\n      horizontal ? word.start.y === word.end.y : word.start.x === word.end.x,\r\n    words\r\n  )\r\n  R.forEach((word: Word) => {\r\n    const col = word.start[colProp]\r\n    const row = word.start[rowProp]\r\n    if (row > height) return\r\n    const start = col < 0 ? 0 : R.indexOf(col, lines[row])\r\n    const length = col < 0 ? word.end[colProp] : word.end[colProp] - col\r\n    lines[row] = R.remove(start, length, lines[row])\r\n  }, filtered)\r\n  return lines\r\n}\r\n\r\nexport function getLines({ grid, words }: State) {\r\n  return {\r\n    horizontal: getLines2(grid[0].length, grid.length, words, true),\r\n    vertical: getLines2(grid.length, grid[0].length, words, false),\r\n  }\r\n}\r\n\r\nexport function getNumbers({ words }: State): Pos[] {\r\n  const uniqStarts = R.uniq(R.map((word) => word.start, words))\r\n  const sorted = R.sortWith(\r\n    [R.ascend(R.prop('y')), R.ascend(R.prop('x'))],\r\n    uniqStarts\r\n  )\r\n  return sorted\r\n}\r\n\r\nexport function Grid(props: GridProps) {\r\n  const { state } = React.useContext(StateContext)\r\n  const lines = getLines(state)\r\n  const numbers = getNumbers(state)\r\n  const [dragStart, setDragStart] = React.useState<Pos>()\r\n  const [dragEnd, setDragEnd] = React.useState<Pos>()\r\n  const dragBorderColor =\r\n    dragStart && dragEnd\r\n      ? isValidWord(\r\n          word(\r\n            Math.min(dragStart.x, dragEnd.x),\r\n            Math.min(dragStart.y, dragEnd.y),\r\n            Math.max(dragStart.x, dragEnd.x),\r\n            Math.max(dragStart.y, dragEnd.y)\r\n          ),\r\n          state.words\r\n        )\r\n        ? 'border-green-400'\r\n        : 'border-red-800'\r\n      : ''\r\n  const vertical = R.filter((w) => w.start.x === w.end.x, state.words)\r\n  const horizontal = R.filter((w) => w.start.y === w.end.y, state.words)\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center\">\r\n      {state.grid.map((row, y) => {\r\n        return (\r\n          <div\r\n            className=\"flex flex-row text-lg\"\r\n            key={y}\r\n            onDragOver={(e) => {\r\n              e.stopPropagation()\r\n              e.preventDefault()\r\n            }}\r\n          >\r\n            {row.map((letter, x) => {\r\n              const wordStartNumber = R.indexOf({ x, y }, numbers)\r\n              return (\r\n                <AddWordDragZone\r\n                  key={x}\r\n                  x={x}\r\n                  y={y}\r\n                  dragStart={dragStart}\r\n                  setDragStart={setDragStart}\r\n                  dragEnd={dragEnd}\r\n                  setDragEnd={setDragEnd}\r\n                >\r\n                  <div\r\n                    className={classNames(\r\n                      'w-10 h-10 flex items-center justify-center border-black',\r\n                      {\r\n                        border: letter || props.showSolution,\r\n                        'border-dashed': !letter && props.showSolution,\r\n                        'border-none': !letter && !props.showSolution,\r\n                      },\r\n                      letter &&\r\n                        lines.horizontal[y].includes(x) &&\r\n                        state.grid[y][x + 1]\r\n                        ? 'border-r-4'\r\n                        : 'pr-1',\r\n                      letter &&\r\n                        lines.vertical[x].includes(y) &&\r\n                        state.grid[y + 1][x]\r\n                        ? 'border-b-4'\r\n                        : 'pb-1'\r\n                    )}\r\n                  >\r\n                    <Highlights\r\n                      highlightHorizontal={props.highlightHorizontal}\r\n                      highlightVertical={props.highlightVertical}\r\n                      x={x}\r\n                      y={y}\r\n                      dragColor={dragBorderColor}\r\n                      dragStart={dragStart}\r\n                      dragEnd={dragEnd}\r\n                      horizontalWords={horizontal}\r\n                      verticalWords={vertical}\r\n                    />\r\n                    {wordStartNumber >= 0 ? (\r\n                      <span className=\"absolute top-0 left-1 text-xs\">\r\n                        {wordStartNumber + 1}\r\n                      </span>\r\n                    ) : null}\r\n                    {props.showSolution && (\r\n                      <LetterInput x={x} y={y} letter={letter} />\r\n                    )}\r\n                  </div>\r\n                </AddWordDragZone>\r\n              )\r\n            })}\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import * as R from 'ramda'\r\nimport React from 'react'\r\nimport { getNumbers } from './Grid'\r\nimport { StateContext } from './StateContext'\r\n\r\nexport function Definitions() {\r\n  const { state } = React.useContext(StateContext)\r\n  const numbers = getNumbers(state)\r\n  const filteredHorizontal = R.filter(\r\n    (word) => word.start.y === word.end.y,\r\n    state.words\r\n  )\r\n  const horizontalWithNumbers = R.map(\r\n    (word) => ({ wordBounds: word, number: 1+R.indexOf(word.start, numbers) }),\r\n    filteredHorizontal\r\n  )\r\n  const horizontalWithNumbersSorted = R.sortWith([R.ascend(R.prop('number'))], horizontalWithNumbers)\r\n  const filteredVertical = R.filter(\r\n    (word) => word.start.x === word.end.x,\r\n    state.words\r\n  )\r\n  const verticalWithNumbers = R.map(\r\n    (word) => ({ wordBounds: word, number: 1+R.indexOf(word.start, numbers) }),\r\n    filteredVertical\r\n  )\r\n  const verticalWithNumbersSorted = R.sortWith([R.ascend(R.prop('number'))], verticalWithNumbers)\r\n\r\n  return (\r\n    <div className=\"flex flex-col shadow-md p-4 border rounded\">\r\n      <h3 className=\"text-xl font-bold\">Waagerecht:</h3>\r\n      {horizontalWithNumbersSorted.map(({ wordBounds, number }) => {\r\n        let word = ''\r\n        for (let i = 0; i <= wordBounds.end.x - wordBounds.start.x; i++) {\r\n          word += state.grid[wordBounds.start.y][wordBounds.start.x + i] || ' _'\r\n        }\r\n        return (\r\n          <div key={number}>\r\n            <span className=\"ml-3 mr-2\">{number}</span>\r\n            <span>{word}</span>\r\n          </div>\r\n        )\r\n      })}\r\n      <h3 className=\"mt-2 text-xl font-bold\">Senkrecht:</h3>\r\n      {verticalWithNumbersSorted.map(({ wordBounds, number }) => {\r\n        let word = ''\r\n        for (let i = 0; i <= wordBounds.end.y - wordBounds.start.y; i++) {\r\n          word += state.grid[wordBounds.start.y + i][wordBounds.start.x]\r\n        }\r\n        return (\r\n          <div key={number}>\r\n            <span className=\"ml-3 mr-2\">{number}</span>\r\n            <span>{word}</span>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faUndo,\n  faRedo,\n  faTrash,\n  faDownload,\n} from '@fortawesome/free-solid-svg-icons'\nimport download from 'downloadjs'\nimport { toPng } from 'html-to-image'\nimport React from 'react'\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { AutoSave, loadSavedState } from './AutoSave'\nimport { Grid } from './Grid'\nimport { Action, redo, reducer, reset, State, undo } from './reducer'\nimport { initialState, StateContext } from './StateContext'\nimport { Definitions } from './Definitions'\n\nfunction Button(\n  props: React.PropsWithChildren<{\n    bg: string\n    'hover-bg': string\n    onClick: () => void\n    title?: string\n  }>\n) {\n  const { bg, 'hover-bg': hoverBg, children, ...params } = props\n  return (\n    <button\n      className={`${bg} ${hoverBg} text-white font-bold py-2 px-4 rounded`}\n      {...params}\n    >\n      {children}\n    </button>\n  )\n}\nfunction App() {\n  const [state, dispatch] = React.useReducer<React.Reducer<State, Action>>(\n    reducer,\n    loadSavedState() || initialState\n  )\n  const solutionRef = React.createRef<HTMLDivElement>()\n  const gridRef = React.createRef<HTMLDivElement>()\n  const [highlightHorizontal, setHighlightHorizontal] = React.useState(true)\n  const [highlightVertical, setHighlightVertical] = React.useState(true)\n  return (\n    <div className=\"mx-auto sm:w-3/4 md:w-2/4 my-10 inset-0 flex items-center justify-center\">\n      <div className=\"flex flex-col items-center justify-center\">\n        <StateContext.Provider value={{ state: state, dispatch: dispatch }}>\n          <GlobalHotKeys\n            keyMap={{\n              UNDO: ['ctrl+z', 'command+z'],\n              REDO: ['ctrl+y', 'command+y', 'ctrl+shift+z', 'command+shift+z'],\n            }}\n            handlers={{\n              UNDO: () => dispatch(undo()),\n              REDO: () => dispatch(redo()),\n            }}\n          >\n            <AutoSave />\n            <div className=\"right flex flex-row space-x-4 mb-4\">\n              <Button\n                bg=\"bg-blue-500\"\n                hover-bg=\"hover:bg-blue-700\"\n                onClick={() => dispatch(undo())}\n                title=\"Rückgängig (Strg+Z)\"\n              >\n                <FontAwesomeIcon icon={faUndo} />\n              </Button>\n              <Button\n                bg=\"bg-blue-500\"\n                hover-bg=\"hover:bg-blue-700\"\n                onClick={() => dispatch(redo())}\n                title=\"Wiederholen (Strg+Y)\"\n              >\n                <FontAwesomeIcon icon={faRedo} />\n              </Button>\n              <Button\n                bg=\"bg-red-500\"\n                hover-bg=\"hover:bg-red-700\"\n                onClick={() => {\n                  if (window.confirm('Alles löschen?')) {\n                    dispatch(reset(initialState))\n                  }\n                }}\n              >\n                <FontAwesomeIcon icon={faTrash} className=\"mr-2\" />\n                Zurücksetzen\n              </Button>\n              <Button\n                bg=\"bg-blue-500\"\n                hover-bg=\"hover:bg-blue-700\"\n                onClick={() => {\n                  if (solutionRef.current) {\n                    toPng(solutionRef.current, {\n                      quality: 1,\n                      pixelRatio: 1,\n                      cacheBust: true,\n                    })\n                      .then(function (dataUrl) {\n                        download(dataUrl, 'solution.png')\n                      })\n                      .catch(function (error) {\n                        console.error('oops, something went wrong!', error)\n                      })\n                  }\n                }}\n                title=\"Download\"\n              >\n                <FontAwesomeIcon icon={faDownload} />\n              </Button>\n            </div>\n            <div className=\"flex flex-row flex-align-left mb-4\">\n              <div className=\"flex space-x-2 mr-6\">\n                <input\n                  id=\"highlightHorizontal\"\n                  className=\"form-checkbox\"\n                  type=\"checkbox\"\n                  checked={highlightHorizontal}\n                  onChange={() => setHighlightHorizontal(!highlightHorizontal)}\n                />\n                <label htmlFor=\"highlightHorizontal\">\n                  Horizontale Wörter hervorheben\n                </label>\n              </div>\n              <div className=\"flex space-x-2\">\n                <input\n                  id=\"highlightVertical\"\n                  className=\"form-checkbox\"\n                  type=\"checkbox\"\n                  checked={highlightVertical}\n                  onChange={() => setHighlightVertical(!highlightVertical)}\n                />\n                <label htmlFor=\"highlightVertical\">\n                  Vertikale Wörter hervorheben\n                </label>\n              </div>\n            </div>\n            <div ref={solutionRef}>\n              <Grid\n                showSolution\n                highlightHorizontal={highlightHorizontal}\n                highlightVertical={highlightVertical}\n              />\n            </div>\n            <hr className=\"border border-gray-400 my-4 w-full\" />\n            <div className=\"my-8\">\n              <span className=\"text-2xl mr-3\">Vorschau: </span>\n              <Button\n                bg=\"bg-blue-500\"\n                hover-bg=\"hover:bg-blue-700\"\n                onClick={() => {\n                  if (gridRef.current) {\n                    toPng(gridRef.current)\n                      .then(function (dataUrl) {\n                        download(dataUrl, 'grid.png')\n                      })\n                      .catch(function (error) {\n                        console.error('oops, something went wrong!', error)\n                      })\n                  }\n                }}\n                title=\"Download\"\n              >\n                <FontAwesomeIcon icon={faDownload} className=\"mr-2\" />\n                Rätsel herunterladen\n              </Button>\n            </div>\n            <div className=\"flex flex-row space-x-12\">\n              <div ref={gridRef}>\n                <Grid />\n              </div>\n              <Definitions />\n            </div>\n          </GlobalHotKeys>\n        </StateContext.Provider>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}