{"version":3,"sources":["StateContext.tsx","AutoSave.tsx","reducer.ts","Grid.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["baseState","grid","R","words","initialState","history","actions","undoStack","StateContext","React","createContext","state","dispatch","AutoSave","useContext","useEffect","window","localStorage","JSON","stringify","isBaseState","undefined","word","x1","y1","x2","y2","start","x","Math","min","y","end","max","withHistory","isValidWord","filterSameLine","w","reducer","prev","action","type","previous","payload","letter","nextState","length","change","getLines2","width","height","horizontal","colProp","rowProp","lines","filtered","col","row","Grid","props","useState","dragImg","Image","src","vertical","getLines","numbers","uniqStarts","getNumbers","dragStart","setDragStart","dragEnd","setDragEnd","dragBorderColor","focusInput","document","getElementById","focus","map","className","onDragOver","e","stopPropagation","preventDefault","wordStartNumber","border","includes","showSolution","draggable","onDragStart","dataTransfer","setDragImage","onDragEnter","onDragEnd","highlightVertical","highlightHorizontal","id","size","value","pattern","onChange","target","substr","toUpperCase","test","isLetter","onClick","select","onKeyDown","isHotkey","nativeEvent","tabIndex","App","useReducer","parse","loadSavedState","setHighlightHorizontal","setHighlightVertical","Provider","keyMap","UNDO","REDO","handlers","title","icon","faUndo","faRedo","confirm","faTrash","name","htmlFor","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.9acac07c.chunk.js","sourcesContent":["import React from 'react'\r\nimport * as R from 'ramda'\r\nimport { State, Action, BaseState } from './reducer'\r\n\r\nconst baseState: BaseState = {\r\n  grid: R.times(() => R.times<''>(() => '', 26), 19),\r\n  words: [],\r\n}\r\n\r\nexport const initialState = {\r\n  ...baseState,\r\n  history: {\r\n    initialState: baseState,\r\n    actions: [],\r\n    undoStack: [],\r\n  },\r\n}\r\n\r\nexport const StateContext = React.createContext<{\r\n  state: State\r\n  dispatch: (action: Action) => void\r\n}>({\r\n  state: initialState,\r\n  dispatch: () => {},\r\n})\r\n","import React from 'react'\r\nimport { State } from './reducer';\r\nimport { StateContext } from \"./StateContext\";\r\n\r\nexport function AutoSave() {\r\n  const { state } = React.useContext(StateContext)\r\n  React.useEffect(() => {\r\n    window.localStorage['kreuzwort'] = JSON.stringify(state)\r\n  }, [state])\r\n  return <></>\r\n}\r\n\r\nexport function loadSavedState() {\r\n  if (window.localStorage['kreuzwort']) return JSON.parse(window.localStorage['kreuzwort']) as State\r\n}","import * as R from 'ramda'\r\n\r\n// prettier-ignore\r\nexport type Letter = 'A'|'B'|'C'|'D'|'E'|'F'|'G'|'H'|'I'|'J'|'K'|'L'|'M'|'N'|'O'|'P'|'Q'|'R'|'S'|'T'|'U'|'V'|'W'|'X'|'Y'|'Z'\r\nexport function isLetter(letter: Letter | string): letter is Letter {\r\n  return /[A-Z]/.test(letter)\r\n}\r\nexport interface Pos {\r\n  x: number\r\n  y: number\r\n}\r\nexport interface Word {\r\n  start: Pos\r\n  end: Pos\r\n}\r\n\r\nexport interface State extends BaseState {\r\n  history: { initialState: BaseState; actions: Action[]; undoStack: Action[] }\r\n}\r\n\r\nexport interface BaseState {\r\n  grid: (Letter | '')[][]\r\n  words: Word[]\r\n}\r\n\r\nfunction isBaseState(state: State | BaseState): state is BaseState {\r\n  return (state as State).history === undefined\r\n}\r\n\r\nexport function word(x1: number, y1: number, x2: number, y2: number): Word {\r\n  return {\r\n    start: { x: Math.min(x1, x2), y: Math.min(y1, y2) },\r\n    end: { x: Math.max(x1, x2), y: Math.max(y1, y2) },\r\n  }\r\n}\r\n\r\nexport function withHistory(baseState: BaseState): State {\r\n  return {\r\n    ...baseState,\r\n    history: {\r\n      initialState: baseState,\r\n      actions: [],\r\n      undoStack: [],\r\n    },\r\n  }\r\n}\r\nexport function isValidWord(word: Word, words: Word[]) {\r\n  // check if it is in one line\r\n  if (word.start.x !== word.end.x && word.start.y !== word.end.y) return false\r\n\r\n  const filterSameLine = R.filter((w) => {\r\n    return word.start.x === word.end.x // word is vertical\r\n      ? w.start.x === w.end.x && w.start.x === word.start.x // filter only vertical in same col\r\n      : w.start.y === w.end.y && w.start.y === word.start.y // filter only horizontal in same row\r\n  }, words)\r\n  return (\r\n    // check if word start is intersecting existing word\r\n    R.findIndex((w) => {\r\n      if (word.start.x === word.end.x) {\r\n        return word.start.y >= w.start.y && word.start.y <= w.end.y\r\n      } else {\r\n        return word.start.x >= w.start.x && word.start.x <= w.end.x\r\n      }\r\n    }, filterSameLine) === -1\r\n  )\r\n}\r\n\r\ninterface ChangeAction {\r\n  type: 'ChangeAction'\r\n  payload: {\r\n    letter: Letter | ''\r\n    x: number\r\n    y: number\r\n  }\r\n}\r\n\r\ninterface WordAction {\r\n  type: 'WordAction'\r\n  payload: {\r\n    word: Word\r\n  }\r\n}\r\n\r\ninterface UndoAction {\r\n  type: 'UndoAction'\r\n}\r\n\r\ninterface RedoAction {\r\n  type: 'RedoAction'\r\n}\r\n\r\ninterface ResetAction {\r\n  type: 'ResetAction',\r\n  payload: {\r\n    baseState?: BaseState\r\n  }\r\n}\r\n\r\ninterface InitializeAction {\r\n  type: 'InitializeAction'\r\n}\r\n\r\nexport type Action =\r\n  | ChangeAction\r\n  | WordAction\r\n  | UndoAction\r\n  | RedoAction\r\n  | ResetAction\r\n  | InitializeAction\r\n\r\nexport function reducer(\r\n  prev: State | BaseState,\r\n  action: Action = {\r\n    type: 'InitializeAction',\r\n  }\r\n): State {\r\n  const previous = isBaseState(prev) ? withHistory(prev) : prev\r\n  switch (action.type) {\r\n    case 'ChangeAction':\r\n      return {\r\n        ...previous,\r\n        grid: R.update(\r\n          action.payload.y,\r\n          R.update(\r\n            action.payload.x,\r\n            action.payload.letter,\r\n            previous.grid[action.payload.y]\r\n          ),\r\n          previous.grid\r\n        ),\r\n        history: {\r\n          ...previous.history,\r\n          actions: [...previous.history.actions, action],\r\n          undoStack: [],\r\n        },\r\n      }\r\n    case 'WordAction':\r\n      return isValidWord(action.payload.word, previous.words)\r\n        ? {\r\n            ...previous,\r\n            words: [...previous.words, action.payload.word],\r\n            history: {\r\n              ...previous.history,\r\n              actions: [...previous.history.actions, action],\r\n              undoStack: [],\r\n            },\r\n          }\r\n        : previous\r\n    case 'UndoAction': {\r\n      const nextState = R.reduce(\r\n        reducer,\r\n        reducer(previous.history.initialState),\r\n        R.slice(0, -1, previous.history.actions)\r\n      )\r\n      return {\r\n        ...nextState,\r\n        history: {\r\n          ...nextState.history,\r\n          undoStack: [\r\n            ...previous.history.undoStack,\r\n            previous.history.actions[previous.history.actions.length - 1],\r\n          ],\r\n        },\r\n      }\r\n    }\r\n    case 'RedoAction': {\r\n      const nextState = reducer(\r\n        previous,\r\n        previous.history.undoStack[previous.history.undoStack.length - 1]\r\n      )\r\n      return {\r\n        ...nextState,\r\n        history: {\r\n          ...nextState.history,\r\n          undoStack: R.slice(0, -1, previous.history.undoStack),\r\n        },\r\n      }\r\n    }\r\n    case 'ResetAction':\r\n      return {\r\n        ...reducer(action.payload.baseState || previous.history.initialState),\r\n      }\r\n    case 'InitializeAction':\r\n      return previous\r\n  }\r\n}\r\n\r\nexport function change(\r\n  letter: Letter | '',\r\n  x: number,\r\n  y: number\r\n): ChangeAction {\r\n  return {\r\n    type: 'ChangeAction',\r\n    payload: {\r\n      letter: letter,\r\n      x: x,\r\n      y: y,\r\n    },\r\n  }\r\n}\r\n\r\nexport function addWord(word: Word): WordAction {\r\n  return {\r\n    type: 'WordAction',\r\n    payload: {\r\n      word: word,\r\n    },\r\n  }\r\n}\r\n\r\nexport function undo(): UndoAction {\r\n  return {\r\n    type: 'UndoAction',\r\n  }\r\n}\r\n\r\nexport function redo(): RedoAction {\r\n  return {\r\n    type: 'RedoAction',\r\n  }\r\n}\r\n\r\nexport function reset(initial?:BaseState): ResetAction {\r\n  return {\r\n    type: 'ResetAction',\r\n    payload: {\r\n      baseState: initial\r\n    }\r\n  }\r\n}\r\n","import isHotkey from 'is-hotkey'\r\nimport * as R from 'ramda'\r\nimport React from 'react'\r\nimport {\r\n  State,\r\n  Pos,\r\n  Word,\r\n  change,\r\n  isLetter,\r\n  addWord,\r\n  word,\r\n  isValidWord,\r\n  undo,\r\n  redo,\r\n} from './reducer'\r\nimport { StateContext } from './StateContext'\r\n\r\nexport interface GridProps {\r\n  showSolution?: boolean\r\n  highlightHorizontal?: boolean\r\n  highlightVertical?: boolean\r\n}\r\n/**\r\n * Searches for horizontal (rowProp === 'x') or vertical lines (rowProp === 'y') lines for the cross word puzzle\r\n * @param width number of rows\r\n * @param height number of columns\r\n * @param words horizontal or vertical words\r\n * @param rowProp 'x' for horizontal or 'y' for vertical\r\n * @returns list of indizes for every row\r\n */\r\nfunction getLines2(\r\n  width: number,\r\n  height: number,\r\n  words: Word[],\r\n  horizontal: boolean\r\n) {\r\n  const colProp = horizontal ? 'x' : 'y'\r\n  const rowProp = horizontal ? 'y' : 'x'\r\n  const lines: number[][] = R.times(\r\n    () => R.times(R.identity, width - 1),\r\n    height\r\n  )\r\n  const filtered: Word[] = R.filter(\r\n    (word) =>\r\n      horizontal ? word.start.y === word.end.y : word.start.x === word.end.x,\r\n    words\r\n  )\r\n  R.forEach((word: Word) => {\r\n    const col = word.start[colProp]\r\n    const row = word.start[rowProp]\r\n    if (row > height) return\r\n    const start = col < 0 ? 0 : R.indexOf(col, lines[row])\r\n    const length = col < 0 ? word.end[colProp] : word.end[colProp] - col\r\n    lines[row] = R.remove(start, length, lines[row])\r\n  }, filtered)\r\n  return lines\r\n}\r\n\r\nexport function getLines({ grid, words }: State) {\r\n  return {\r\n    horizontal: getLines2(grid[0].length, grid.length, words, true),\r\n    vertical: getLines2(grid.length, grid[0].length, words, false),\r\n  }\r\n}\r\n\r\nexport function getNumbers({ words }: State): Pos[] {\r\n  const uniqStarts = R.uniq(R.map((word) => word.start, words))\r\n  const sorted = R.sortWith(\r\n    [R.ascend(R.prop('y')), R.ascend(R.prop('x'))],\r\n    uniqStarts\r\n  )\r\n  return sorted\r\n}\r\n\r\nexport function Grid(props: GridProps) {\r\n  const [dragImg] = React.useState(() => {\r\n    const dragImg = new Image(0, 0)\r\n    dragImg.src =\r\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\r\n    return dragImg\r\n  })\r\n  const { state, dispatch } = React.useContext(StateContext)\r\n  const lines = getLines(state)\r\n  const numbers = getNumbers(state)\r\n  const [dragStart, setDragStart] = React.useState<Pos>()\r\n  const [dragEnd, setDragEnd] = React.useState<Pos>()\r\n  const dragBorderColor =\r\n    dragStart && dragEnd\r\n      ? isValidWord(\r\n          word(\r\n            Math.min(dragStart.x, dragEnd.x),\r\n            Math.min(dragStart.y, dragEnd.y),\r\n            Math.max(dragStart.x, dragEnd.x),\r\n            Math.max(dragStart.y, dragEnd.y)\r\n          ),\r\n          state.words\r\n        )\r\n        ? 'border-green-400'\r\n        : 'border-red-800'\r\n      : ''\r\n\r\n  function focusInput(x: number, y: number) {\r\n    document.getElementById(`letter-${x}-${y}`)?.focus()\r\n  }\r\n  return (\r\n    <>\r\n      {state.grid.map((row, y) => {\r\n        return (\r\n          <div\r\n            className=\"flex flex-row text-lg\"\r\n            key={y}\r\n            onDragOver={(e) => {\r\n              e.stopPropagation()\r\n              e.preventDefault()\r\n            }}\r\n          >\r\n            {row.map((letter, x) => {\r\n              const vertical = R.filter(\r\n                (w) => w.start.x === w.end.x,\r\n                state.words\r\n              )\r\n              const horizontal = R.filter(\r\n                (w) => w.start.y === w.end.y,\r\n                state.words\r\n              )\r\n              const wordStartNumber = R.indexOf({ x, y }, numbers)\r\n              const border = letter\r\n                ? `border-black border ${\r\n                    lines.horizontal[y]?.includes(x) && state.grid[y][x + 1]\r\n                      ? 'border-r-4'\r\n                      : 'pr-1'\r\n                  } ${\r\n                    lines.vertical[x]?.includes(y) && state.grid[y + 1][x]\r\n                      ? 'border-b-4'\r\n                      : 'pb-1'\r\n                  }`\r\n                : props.showSolution\r\n                ? 'border-black border border-dashed'\r\n                : 'border-none'\r\n              return (\r\n                <div\r\n                  draggable\r\n                  className=\"relative flex w-10 h-10 items-center justify-center\"\r\n                  key={x}\r\n                  onDragStart={(e) => {\r\n                    e.dataTransfer.setDragImage(dragImg, 0, 0)\r\n                    setDragStart({ x, y })\r\n                  }}\r\n                  onDragEnter={() => {\r\n                    setDragEnd({ x, y })\r\n                  }}\r\n                  onDragEnd={() => {\r\n                    if (dragStart && dragEnd) {\r\n                      dispatch(\r\n                        addWord(\r\n                          word(dragStart.x, dragStart.y, dragEnd.x, dragEnd.y)\r\n                        )\r\n                      )\r\n                      setDragStart(undefined)\r\n                      setDragEnd(undefined)\r\n                    }\r\n                  }}\r\n                >\r\n                  <div\r\n                    className={`${border} w-10 h-10 flex items-center justify-center`}\r\n                  >\r\n                    {props.highlightVertical && (\r\n                      <div\r\n                        className={`absolute border-red-400 w-8 h-10 pointer-events-none ${\r\n                          R.find(\r\n                            (w) => x === w.start.x && y === w.start.y,\r\n                            vertical\r\n                          )\r\n                            ? 'border-l-4 border-t-4'\r\n                            : ''\r\n                        } ${\r\n                          R.find(\r\n                            (w) =>\r\n                              x === w.start.x &&\r\n                              x === w.end.x &&\r\n                              y >= w.start.y &&\r\n                              y <= w.end.y,\r\n                            vertical\r\n                          )\r\n                            ? 'border-l-4 border-r-4'\r\n                            : ''\r\n                        } ${\r\n                          R.find(\r\n                            (w) => x === w.end.x && y === w.end.y,\r\n                            vertical\r\n                          )\r\n                            ? 'border-r-4 border-b-4'\r\n                            : ''\r\n                        }`}\r\n                      />\r\n                    )}\r\n                    {props.highlightHorizontal && (\r\n                      <div\r\n                        className={`absolute border-blue-400 w-10 h-8 pointer-events-none ${\r\n                          R.find(\r\n                            (w) => x === w.start.x && y === w.start.y,\r\n                            horizontal\r\n                          )\r\n                            ? 'border-l-4 border-t-4'\r\n                            : ''\r\n                        } ${\r\n                          R.find(\r\n                            (w) =>\r\n                              y === w.start.y &&\r\n                              y === w.end.y &&\r\n                              x >= w.start.x &&\r\n                              x <= w.end.x,\r\n                            horizontal\r\n                          )\r\n                            ? 'border-t-4 border-b-4'\r\n                            : ''\r\n                        } ${\r\n                          R.find(\r\n                            (w) => x === w.end.x && y === w.end.y,\r\n                            horizontal\r\n                          )\r\n                            ? 'border-r-4 border-b-4'\r\n                            : ''\r\n                        }`}\r\n                      />\r\n                    )}\r\n                    {dragStart && (\r\n                      <div\r\n                        className={`absolute ${dragBorderColor} w-7 h-7 pointer-events-none ${\r\n                          x === dragStart?.x && y === dragStart?.y\r\n                            ? 'border-l-4 border-t-4'\r\n                            : ''\r\n                        } ${\r\n                          y === dragStart?.y &&\r\n                          y === dragEnd?.y &&\r\n                          x >= dragStart?.x &&\r\n                          x <= dragEnd?.x //horizontal\r\n                            ? 'border-t-4 border-b-4'\r\n                            : x === dragStart?.x &&\r\n                              x === dragEnd?.x &&\r\n                              y >= dragStart?.y &&\r\n                              y <= dragEnd?.y //vertical\r\n                            ? 'border-l-4 border-r-4'\r\n                            : ''\r\n                        } ${\r\n                          x === dragEnd?.x && y === dragEnd?.y\r\n                            ? 'border-r-4 border-b-4'\r\n                            : ''\r\n                        }`}\r\n                      />\r\n                    )}\r\n                    {wordStartNumber >= 0 ? (\r\n                      <span className=\"absolute top-0 left-1 text-xs\">\r\n                        {wordStartNumber + 1}\r\n                      </span>\r\n                    ) : null}\r\n                    {props.showSolution && (\r\n                      <input\r\n                        id={`letter-${x}-${y}`}\r\n                        className=\"text-center w-10 h-10 bg-transparent border-none outline-none\"\r\n                        type=\"text\"\r\n                        size={1}\r\n                        value={letter}\r\n                        pattern=\"[A-Z]\"\r\n                        onChange={(e) => {\r\n                          if (!e.target.value) {\r\n                            dispatch(change('', x, y))\r\n                          } else {\r\n                            const letter = e.target.value\r\n                              .substr(-1)\r\n                              .toUpperCase()\r\n                            if (isLetter(letter)) {\r\n                              dispatch(change(letter, x, y))\r\n                            }\r\n                          }\r\n                        }}\r\n                        onClick={(e) => (e.target as HTMLInputElement).select()}\r\n                        // onFocus={(e) => (e.target as HTMLInputElement).select()}\r\n                        onKeyDown={(e) => {\r\n                          if (isHotkey('left')(e.nativeEvent)) {\r\n                            focusInput(x - 1, y)\r\n                            e.preventDefault()\r\n                          } else if (isHotkey('right')(e.nativeEvent)) {\r\n                            focusInput(x + 1, y)\r\n                            e.preventDefault()\r\n                          } else if (\r\n                            isHotkey('up')(e.nativeEvent) ||\r\n                            isHotkey('shift+enter')(e.nativeEvent)\r\n                          ) {\r\n                            focusInput(x, y - 1)\r\n                            e.preventDefault()\r\n                          } else if (\r\n                            isHotkey('down')(e.nativeEvent) ||\r\n                            isHotkey('enter')(e.nativeEvent)\r\n                          ) {\r\n                            focusInput(x, y + 1)\r\n                            e.preventDefault()\r\n                          } else if (isHotkey('mod+z')(e.nativeEvent)) {\r\n                            dispatch(undo())\r\n                          } else if (\r\n                            isHotkey('mod+shift+z')(e.nativeEvent) ||\r\n                            isHotkey('mod+y')(e.nativeEvent)\r\n                          ) {\r\n                            dispatch(redo())\r\n                          }\r\n                        }}\r\n                        tabIndex={0}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUndo, faRedo, faTrash } from '@fortawesome/free-solid-svg-icons'\nimport React from 'react'\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { AutoSave, loadSavedState } from './AutoSave'\nimport { Grid } from './Grid'\nimport { Action, redo, reducer, reset, State, undo } from './reducer'\nimport { initialState, StateContext } from './StateContext'\n\nfunction App() {\n  const [state, dispatch] = React.useReducer<React.Reducer<State, Action>>(\n    reducer,\n    loadSavedState() || initialState\n  )\n  const [highlightHorizontal, setHighlightHorizontal] = React.useState(false)\n  const [highlightVertical, setHighlightVertical] = React.useState(false)\n  return (\n    <div className=\"mx-auto sm:w-3/4 md:w-2/4 mt-10 inset-0 flex items-center justify-center\">\n      <div className=\"flex flex-col items-center justify-center\">\n        <StateContext.Provider value={{ state: state, dispatch: dispatch }}>\n          <GlobalHotKeys\n            keyMap={{\n              UNDO: ['ctrl+z', 'command+z'],\n              REDO: ['ctrl+y', 'command+y', 'ctrl+shift+z', 'command+shift+z'],\n            }}\n            handlers={{\n              UNDO: () => dispatch(undo()),\n              REDO: () => dispatch(redo()),\n            }}\n          >\n            <AutoSave />\n            <div className=\"right flex flex-row space-x-4 mb-4\">\n              <button\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n                onClick={() => dispatch(undo())}\n                title=\"Rückgängig (Strg + Z)\"\n              >\n                <FontAwesomeIcon icon={faUndo} />\n              </button>\n              <button\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n                onClick={() => dispatch(redo())}\n                title=\"Wiederholen (Strg + Y)\"\n              >\n                <FontAwesomeIcon icon={faRedo} />\n              </button>\n              <button\n                className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\"\n                onClick={() => {\n                  if (window.confirm('Alles löschen?')) {\n                    dispatch(reset(initialState))\n                  }\n                }}\n              >\n                <FontAwesomeIcon icon={faTrash} className=\"mr-2\" />\n                Zurücksetzen\n              </button>\n            </div>\n            <div className=\"flex flex-row flex-align-left mb-4\">\n              <div className=\"flex space-x-2 mr-6\">\n                <input\n                  className=\"form-checkbox\"\n                  name=\"highlightHorizontal\"\n                  type=\"checkbox\"\n                  value={highlightHorizontal ? 'checked' : ''}\n                  onChange={(e) => setHighlightHorizontal(!highlightHorizontal)}\n                />\n                <label htmlFor=\"highlightHorizontal\">\n                  Horizontale Wörter hervorheben\n                </label>\n              </div>\n              <div className=\"flex space-x-2\">\n                <input\n                  className=\"form-checkbox\"\n                  type=\"checkbox\"\n                  value={highlightVertical ? 'checked' : ''}\n                  onChange={(e) => setHighlightVertical(!highlightVertical)}\n                />\n                <label htmlFor=\"highlightVertical\">\n                  Vertikale Wörter hervorheben\n                </label>\n              </div>\n            </div>\n            <Grid\n              showSolution\n              highlightHorizontal={highlightHorizontal}\n              highlightVertical={highlightVertical}\n            />\n            <div className=\"m-4\" />\n            <Grid />\n          </GlobalHotKeys>\n        </StateContext.Provider>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}