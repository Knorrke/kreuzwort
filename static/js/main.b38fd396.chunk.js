(this.webpackJsonpkreuzwortraetsel=this.webpackJsonpkreuzwortraetsel||[]).push([[0],{43:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var r=n(3),a=n.n(r),o=n(34),i=n.n(o),c=(n(43),n(11)),s=n(30),d=n(31),l=n(35),u=n(4),x=n(52),h={grid:x.a((function(){return x.a((function(){return""}),25)}),15),words:[]},b=Object(u.a)(Object(u.a)({},h),{},{history:{initialState:h,actions:[],undoStack:[]}}),j=a.a.createContext({state:b,dispatch:function(){}}),y=n(0);function v(){var t=a.a.useContext(j).state;return a.a.useEffect((function(){window.localStorage.kreuzwort=JSON.stringify(t)}),[t]),Object(y.jsx)(y.Fragment,{})}var f=n(24),g=n.n(f),O=n(38),m=n(37),p=n(55),w=n(56),A=n(57),S=n(65),k=n(63),N=n(58),z=n(59),C=n(60),E=n(36),D=n(66),R=n(15),W=n(62),B=n(61),I=n(64),M=n(53),H=n(54);function F(t){return void 0===t.history}function V(t,e,n,r){return{start:{x:Math.min(t,n),y:Math.min(e,r)},end:{x:Math.max(t,n),y:Math.max(e,r)}}}function U(t){return Object(u.a)(Object(u.a)({},t),{},{history:{initialState:t,actions:[],undoStack:[]}})}function P(t,e){if(E.a(t.start,t.end))return!1;if(t.start.x!==t.end.x&&t.start.y!==t.end.y)return!1;var n=m.a((function(e){return t.start.x===t.end.x?e.start.x===e.end.x&&e.start.x===t.start.x:e.start.y===e.end.y&&e.start.y===t.start.y}),e);return W.a((function(e){return t.start.x===t.end.x?t.start.y>=e.start.y&&t.start.y<=e.end.y||e.start.y>=t.start.y&&e.start.y<=t.end.y:t.start.x>=e.start.x&&t.start.x<=e.end.x||e.start.x>=t.start.x&&e.start.x<=t.end.x}),n)}function J(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"InitializeAction"},n=F(t)?U(t):t;switch(e.type){case"ChangeAction":return Object(u.a)(Object(u.a)({},n),{},{grid:B.a(e.payload.y,B.a(e.payload.x,e.payload.letter,n.grid[e.payload.y]),n.grid),history:Object(u.a)(Object(u.a)({},n.history),{},{actions:[].concat(Object(R.a)(n.history.actions),[e]),undoStack:[]})});case"AddWordAction":return P(e.payload.word,n.words)?Object(u.a)(Object(u.a)({},n),{},{words:[].concat(Object(R.a)(n.words),[e.payload.word]),history:Object(u.a)(Object(u.a)({},n.history),{},{actions:[].concat(Object(R.a)(n.history.actions),[e]),undoStack:[]})}):n;case"ChangeWordAction":return Object(u.a)(Object(u.a)({},n),{},{words:k.a((function(t){return E.a(t,e.payload.old)?e.payload.new:t}),n.words),history:Object(u.a)(Object(u.a)({},n.history),{},{actions:[].concat(Object(R.a)(n.history.actions),[e]),undoStack:[]})});case"RemoveWordAction":return Object(u.a)(Object(u.a)({},n),{},{words:I.a([e.payload.word],n.words),history:Object(u.a)(Object(u.a)({},n.history),{},{actions:[].concat(Object(R.a)(n.history.actions),[e]),undoStack:[]})});case"UndoAction":var r=M.a(J,J(n.history.initialState),H.a(0,-1,n.history.actions));return Object(u.a)(Object(u.a)({},r),{},{history:Object(u.a)(Object(u.a)({},r.history),{},{undoStack:[].concat(Object(R.a)(n.history.undoStack),[n.history.actions[n.history.actions.length-1]])})});case"RedoAction":var a=J(n,n.history.undoStack[n.history.undoStack.length-1]);return Object(u.a)(Object(u.a)({},a),{},{history:Object(u.a)(Object(u.a)({},a.history),{},{undoStack:H.a(0,-1,n.history.undoStack)})});case"ResetAction":return Object(u.a)({},J(e.payload.baseState||n.history.initialState));case"InitializeAction":return n}}function Z(t,e,n){return{type:"ChangeAction",payload:{letter:t,x:e,y:n}}}function L(t){var e=a.a.useState((function(){var t=new Image(0,0);return t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",t})),n=Object(c.a)(e,1)[0],r=t.x,o=t.y,i=t.dragStart,s=t.setDragStart,d=t.dragEnd,l=t.setDragEnd,u=a.a.useContext(j),x=u.state,h=u.dispatch;return Object(y.jsx)("div",{draggable:!0,className:"relative flex w-10 h-10 items-center justify-center",onDragStart:function(t){t.dataTransfer.setDragImage(n,0,0),s({x:r,y:o})},onDragEnter:function(){l({x:r,y:o})},onDrop:function(){if(i&&d){var t=V(i.x,i.y,d.x,d.y);if(P(t,x.words))h({type:"AddWordAction",payload:{word:t}});else if(!E.a(i,d)){var e=D.a((function(t){return E.a(t.start,i)&&(i.x===d.x?t.end.x===d.x:t.end.y===d.y)}),x.words);e&&(E.a(e.end,d)?h(function(t){return{type:"RemoveWordAction",payload:{word:t}}}(e)):h(function(t,e){return{type:"ChangeWordAction",payload:{old:t,new:e}}}(e,t)))}s(void 0),l(void 0)}},children:t.children})}var T=n(67);function G(t){return Object(y.jsx)("div",{className:g()("absolute",t.color,"pointer-events-none",{"w-8":t.vertical,"h-10":t.vertical,"w-10":!t.vertical,"h-8":!t.vertical,"border-l-4":t.start||t.vertical&&t.middle,"border-t-4":t.start||!t.vertical&&t.middle,"border-r-4":t.end||t.vertical&&t.middle,"border-b-4":t.end||!t.vertical&&t.middle})})}function K(t){var e=t.x,n=t.y,r=t.dragStart,a=t.dragEnd,o=t.dragColor,i=t.horizontalWords,c=t.verticalWords;return Object(y.jsxs)(y.Fragment,{children:[t.highlightVertical&&Object(y.jsx)(G,{vertical:!0,start:T.a((function(t){return e===t.start.x&&n===t.start.y}),c),middle:T.a((function(t){return e===t.start.x&&e===t.end.x&&n>=t.start.y&&n<=t.end.y}),c),end:T.a((function(t){return e===t.end.x&&n===t.end.y}),c),color:"border-blue-400"}),t.highlightHorizontal&&Object(y.jsx)(G,{color:"border-blue-400",start:T.a((function(t){return e===t.start.x&&n===t.start.y}),i),middle:T.a((function(t){return n===t.start.y&&n===t.end.y&&e>=t.start.x&&e<=t.end.x}),i),end:T.a((function(t){return e===t.end.x&&n===t.end.y}),i)}),r&&Object(y.jsx)(G,{vertical:(null===r||void 0===r?void 0:r.x)===(null===a||void 0===a?void 0:a.x),color:o,start:e===(null===r||void 0===r?void 0:r.x)&&n===(null===r||void 0===r?void 0:r.y),middle:(null===r||void 0===r?void 0:r.y)===(null===a||void 0===a?void 0:a.y)&&n===(null===r||void 0===r?void 0:r.y)&&e>=(null===r||void 0===r?void 0:r.x)&&e<=(null===a||void 0===a?void 0:a.x)||(null===r||void 0===r?void 0:r.x)===(null===a||void 0===a?void 0:a.x)&&e===(null===r||void 0===r?void 0:r.x)&&e===(null===a||void 0===a?void 0:a.x)&&n>=(null===r||void 0===r?void 0:r.y)&&n<=(null===a||void 0===a?void 0:a.y),end:e===(null===a||void 0===a?void 0:a.x)&&n===(null===a||void 0===a?void 0:a.y)})]})}var Q=n(10),Y=n.n(Q);function _(t,e){var n;null===(n=document.getElementById("letter-".concat(t,"-").concat(e)))||void 0===n||n.focus()}function q(t){var e=t.x,n=t.y,r=t.letter,o=a.a.useContext(j).dispatch;return Object(y.jsx)("input",{id:"letter-".concat(e,"-").concat(n),className:"text-center w-10 h-10 bg-transparent border-none outline-none",type:"text",size:1,value:r,pattern:"[A-Z]",onChange:function(t){if(t.target.value){var r=t.target.value.substr(-1).toUpperCase();(function(t){return/[A-Z]/.test(t)})(r)&&o(Z(r,e,n))}else o(Z("",e,n))},onClick:function(t){return t.target.select()},onKeyDown:function(t){Y()("left")(t.nativeEvent)?(_(e-1,n),t.preventDefault()):Y()("right")(t.nativeEvent)?(_(e+1,n),t.preventDefault()):Y()("up")(t.nativeEvent)||Y()("shift+enter")(t.nativeEvent)?(_(e,n-1),t.preventDefault()):Y()("down")(t.nativeEvent)||Y()("enter")(t.nativeEvent)?(_(e,n+1),t.preventDefault()):Y()("mod+z")(t.nativeEvent)?o({type:"UndoAction"}):(Y()("mod+shift+z")(t.nativeEvent)||Y()("mod+y")(t.nativeEvent))&&o({type:"RedoAction"})},tabIndex:0})}function X(t,e,n,r){var a=r?"x":"y",o=r?"y":"x",i=x.a((function(){return x.a(O.a,t-1)}),e),c=m.a((function(t){return r?t.start.y===t.end.y:t.start.x===t.end.x}),n);return p.a((function(t){var n=t.start[a],r=t.start[o];if(!(r>e)){var c=n<0?0:w.a(n,i[r]),s=n<0?t.end[a]:t.end[a]-n;i[r]=A.a(c,s,i[r])}}),c),i}function $(t){var e=t.words,n=S.a(k.a((function(t){return t.start}),e));return N.a([z.a(C.a("y")),z.a(C.a("x"))],n)}function tt(t){var e=a.a.useContext(j).state,n=function(t){var e=t.grid,n=t.words;return{horizontal:X(e[0].length,e.length,n,!0),vertical:X(e.length,e[0].length,n,!1)}}(e),r=$(e),o=a.a.useState(),i=Object(c.a)(o,2),s=i[0],d=i[1],l=a.a.useState(),u=Object(c.a)(l,2),x=u[0],h=u[1],b=s&&x?P(V(Math.min(s.x,x.x),Math.min(s.y,x.y),Math.max(s.x,x.x),Math.max(s.y,x.y)),e.words)?"border-green-400":"border-red-800":"",v=m.a((function(t){return t.start.x===t.end.x}),e.words),f=m.a((function(t){return t.start.y===t.end.y}),e.words);return Object(y.jsx)("div",{className:"flex flex-col items-center justify-center",children:e.grid.map((function(a,o){return Object(y.jsx)("div",{className:"flex flex-row text-lg",onDragOver:function(t){t.stopPropagation(),t.preventDefault()},children:a.map((function(a,i){var c=w.a({x:i,y:o},r);return Object(y.jsx)(L,{x:i,y:o,dragStart:s,setDragStart:d,dragEnd:x,setDragEnd:h,children:Object(y.jsxs)("div",{className:g()("w-10 h-10 flex items-center justify-center border-black",{border:a||t.showSolution,"border-dashed":!a&&t.showSolution,"border-none":!a&&!t.showSolution},a&&n.horizontal[o].includes(i)&&e.grid[o][i+1]?"border-r-4":"pr-1",a&&n.vertical[i].includes(o)&&e.grid[o+1][i]?"border-b-4":"pb-1"),children:[Object(y.jsx)(K,{highlightHorizontal:t.highlightHorizontal,highlightVertical:t.highlightVertical,x:i,y:o,dragColor:b,dragStart:s,dragEnd:x,horizontalWords:f,verticalWords:v}),c>=0?Object(y.jsx)("span",{className:"absolute top-0 left-1 text-xs",children:c+1}):null,t.showSolution&&Object(y.jsx)(q,{x:i,y:o,letter:a})]})},i)}))},o)}))})}function et(){var t=a.a.useContext(j).state,e=$(t),n=m.a((function(t){return t.start.y===t.end.y}),t.words),r=k.a((function(t){return{wordBounds:t,number:1+w.a(t.start,e)}}),n),o=N.a([z.a(C.a("number"))],r),i=m.a((function(t){return t.start.x===t.end.x}),t.words),c=k.a((function(t){return{wordBounds:t,number:1+w.a(t.start,e)}}),i),s=N.a([z.a(C.a("number"))],c);return Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsx)("h3",{className:"text-xl font-bold",children:"Waagerecht:"}),o.map((function(e){for(var n=e.wordBounds,r=e.number,a="",o=0;o<=n.end.x-n.start.x;o++)a+=t.grid[n.start.y][n.start.x+o]||" _";return Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{className:"ml-3 mr-2",children:r}),Object(y.jsx)("span",{children:a})]},r)})),Object(y.jsx)("h3",{className:"mt-2 text-xl font-bold",children:"Senkrecht:"}),s.map((function(e){for(var n=e.wordBounds,r=e.number,a="",o=0;o<=n.end.y-n.start.y;o++)a+=t.grid[n.start.y+o][n.start.x];return Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{className:"ml-3 mr-2",children:r}),Object(y.jsx)("span",{children:a})]},r)}))]})}var nt=function(){var t=a.a.useReducer(J,function(){if(window.localStorage.kreuzwort)return JSON.parse(window.localStorage.kreuzwort)}()||b),e=Object(c.a)(t,2),n=e[0],r=e[1],o=a.a.useState(!0),i=Object(c.a)(o,2),u=i[0],x=i[1],h=a.a.useState(!0),f=Object(c.a)(h,2),g=f[0],O=f[1];return Object(y.jsx)("div",{className:"mx-auto sm:w-3/4 md:w-2/4 mt-10 inset-0 flex items-center justify-center",children:Object(y.jsx)("div",{className:"flex flex-col items-center justify-center",children:Object(y.jsx)(j.Provider,{value:{state:n,dispatch:r},children:Object(y.jsxs)(l.GlobalHotKeys,{keyMap:{UNDO:["ctrl+z","command+z"],REDO:["ctrl+y","command+y","ctrl+shift+z","command+shift+z"]},handlers:{UNDO:function(){return r({type:"UndoAction"})},REDO:function(){return r({type:"RedoAction"})}},children:[Object(y.jsx)(v,{}),Object(y.jsxs)("div",{className:"right flex flex-row space-x-4 mb-4",children:[Object(y.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:function(){return r({type:"UndoAction"})},title:"R\xfcckg\xe4ngig (Strg + Z)",children:Object(y.jsx)(s.a,{icon:d.c})}),Object(y.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:function(){return r({type:"RedoAction"})},title:"Wiederholen (Strg + Y)",children:Object(y.jsx)(s.a,{icon:d.a})}),Object(y.jsxs)("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:function(){window.confirm("Alles l\xf6schen?")&&r({type:"ResetAction",payload:{baseState:b}})},children:[Object(y.jsx)(s.a,{icon:d.b,className:"mr-2"}),"Zur\xfccksetzen"]})]}),Object(y.jsxs)("div",{className:"flex flex-row flex-align-left mb-4",children:[Object(y.jsxs)("div",{className:"flex space-x-2 mr-6",children:[Object(y.jsx)("input",{id:"highlightHorizontal",className:"form-checkbox",type:"checkbox",checked:u,onChange:function(){return x(!u)}}),Object(y.jsx)("label",{htmlFor:"highlightHorizontal",children:"Horizontale W\xf6rter hervorheben"})]}),Object(y.jsxs)("div",{className:"flex space-x-2",children:[Object(y.jsx)("input",{id:"highlightVertical",className:"form-checkbox",type:"checkbox",checked:g,onChange:function(){return O(!g)}}),Object(y.jsx)("label",{htmlFor:"highlightVertical",children:"Vertikale W\xf6rter hervorheben"})]})]}),Object(y.jsx)(tt,{showSolution:!0,highlightHorizontal:u,highlightVertical:g}),Object(y.jsx)("h2",{className:"text-2xl my-8",children:"Vorschau:"}),Object(y.jsxs)("div",{className:"flex flex-row space-x-12",children:[Object(y.jsx)(et,{}),Object(y.jsx)(tt,{})]})]})})})})},rt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};i.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(nt,{})}),document.getElementById("root")),rt()}},[[51,1,2]]]);
//# sourceMappingURL=main.b38fd396.chunk.js.map